# ASS教程
## 0.开始之前
Aegisub汉化版下载地址 https://aegi.vmoe.info/downloads/ 一般用32位的就好
![This is an image](https://github.com/Akte616/yururu.github.io/blob/intro/intro-01.png)

暂时无法在文档外展示此内容
（按汉化组的说法，即使使用64位的Windows系统，也不推荐使用64位版本的Aegisub。因为它不支持Avisynth且运行速度更慢，甚至有时还会出现32位版本中没有的bug）
安装时可选中文

![This is an image](https://github.com/Akte616/yururu.github.io/blob/intro/intro-02.png)

首先导入视频，Aegisub顶部【视频】→【打开视频】
光标放在画面部分，滚动鼠标滚轮即可调整预览画面大小
- 向上滚动：放大画面
- 向下滚动：缩小画面
![This is an image](https://github.com/Akte616/yururu.github.io/blob/intro/intro-03.gif)
为了让特效和原视频对应，选择帧模式
- 向后一帧：键盘方向键【右键】or 鼠标光标在视频进度条上→滚轮向下
- 向前一帧：键盘方向键【左键】or 鼠标光标在视频进度条上→滚轮向上
PS：用时间模式也OK，只是做特效时帧模式更准一点
![This is an image](https://github.com/Akte616/yururu.github.io/blob/intro/intro-04.png)
**字幕组有特定的格式，需要从样轴中导入**
- 目前的[样轴](https://github.com/Akte616/yururu.github.io/blob/intro/%E7%8C%AB%E8%AF%AD%E7%A0%94%E7%A9%B6%E6%89%80-%E6%A0%B7%E8%BD%B4-V2.1.ass)和[字体文件](https://github.com/Akte616/yururu.github.io/blob/intro/SourceHanSerifSC-Bold.otf)（如有更新以群文件为准）

暂时无法在文档外展示此内容
暂时无法在文档外展示此内容
同样是顶部，【字幕】→【样式管理器】→【从脚本中导入】，选择样轴文件，根据需要导入
可以把常用样式复制到左边的【样式库】，下次就不用从样轴导入，直接从样式库导入
![This is an image](https://github.com/Akte616/yururu.github.io/blob/intro/intro-05.png)
![This is an image](https://github.com/Akte616/yururu.github.io/blob/intro/intro-06.png)
![This is an image](https://github.com/Akte616/yururu.github.io/blob/intro/intro-07.png)



## 1.导入文稿
翻译完成后的稿件一般为txt文档，或者Word文档，直接打开文件【Ctrl+A】全选【Ctrl+C】复制【Ctrl+V】丢进去，即可生成一行一行的没有时间的轴（如图左下显示，开始时间0，结束时间-1）
PS：底部多出来的空行可以删去，Aegisub导入时默认导入到当前行的上方，复制粘贴也是一样

这个时候可能样式显示为Default，可以全选改为默认

对于特效样式，顶部【字幕】→【选择多行】，我一般匹配【，在文本中搜索包含的行就可以全选，改为特效样式

PS：【特效】样式只是一个example，可以之后用特效代码随意调整，统一样式为【特效】只是为了和【默认】样式区分开，以便于给【默认】样式批量添加边框模糊

## 2.开始打轴

操作前，声音这边框内的三个都勾上


### 2.1 鼠标流
Aegisub中音频跟视频不是同步的，单独操作音频时视频是静止的，不过播放视频时音频部分会有白线跟视频进度同步，所以预览字幕效果要点左边的【从该位置开始播放视频】（默认快捷键【Ctrl+P】）

打轴主要看界面右上方的声音波形，波形右边两个条，左边【水平缩放】中间和右边【垂直缩放】，根据需要拉就行，如果没有显示波形把底部【频谱分析模式】取消
PS：个人习惯看波形，主要是看不懂频谱（。

然后根据听到的时间点击鼠标，【左键】开始时间，显示为红色，【右键】结束时间，显示为蓝色，前面的白色为上一行的时间，鼠标滚轮上下即可调整向前or向后

【空格】播放当前行，【Enter】移到下一行，如果下一行为空，则创建下一行，流程为：
- 听时间→【左键】开始→【右键】结束→【Enter】下一行→【左键】→【右键】

连轴时，不用确定下一行开始时间，只用确定结束时间，流程为：
- 听时间→【左键】开始→【右键】结束→【Enter】下一行→【右键】

PS：当前后两行时间相连时（即连轴），选择没有时间的下一行，按【空格】会播放上一行的音频；此时鼠标【左键】点下一行的结束时间，会自动把下一行的开始时间定为上一行结束时间的后一帧。所以不用【Enter】到下一行，也可以直接【左键】到下一行结束时间，即流程为
- 听时间→【左键】开始→【右键】结束→【左键】下一行结束
（语言表达能力比较低下，可能有点绕，具体上手操作一下就能get，连轴时很好用）

- 有些时候也可以直接【点击当前行】→【右键】→【使时间连续】
PS：批量选中多行时，这一操作也是有效的

### 2.2 键盘流by南酱
根据视频打轴，可以音画同步，按视频进度条来
方向键【左键】向前一帧，【右键】向后一帧
在一行的起始时间按【Ctrl+3】，结束时间按【Ctrl+4】
也可以选择更顺手的热键：
- 顶部【查看】→【选项】，打开【偏好设置】

- 【界面】→【热键】设置自己顺手的快捷键，默认开始时间【Ctrl+3】，结束时间【Ctrl+4】

PS：如果设置成了键盘上的字母，如【Z】和【X】，在右边文字框内编辑英文时会失效
- 两种方式根据个人习惯和喜好来就好
### 2.3 批量调整时间
选中要调整的行→顶部【计时】→【平移时间】→根据需要选择即可
这里也可以批量调整连轴，顶部【计时】→【使时间连续】


## 3.注意事项
- 如果一句话太长就分两行打
- 逗号和句号一律删除，感叹号可以考虑保留
- 可以适当留空，结束时间可以多留一点方便阅读
- 如果前后句过于接近，请连轴
- 水印和滚轴留给后期
- （）中内容为旁白或小窗
- 【】中内容需做与屏字风格一致的特效，可以留给后期
- 如果做特效使用了新字体记得给压制发一份新字体的文件
- 小窗具体位置和样式根据视频调整
- 如有批量相同样式需求，根据视频需要自行新增样式就好
- 画面特效字、音番歌词需对帧，和视频一致
- 尽量避免字幕显示时间过短
- 不要叠轴，同一条字幕字数过多时，视具体情况自行断行

## 4.样式编辑
对于单行样式调整，可以直接用框中的工具调整，对鼠标光标之后的字生效
从左到右分别是：加粗、斜体、下划线、删除线、字体，主要颜色、次要颜色、边框颜色、阴影颜色

颜色任意一个打开，均为如下界面
- 彩色条 选择颜色
- 灰白条 调整透明度（也可以用右边的【透明度】输入数字调整）
- ASS：&六位颜色代码& （后一个&可以省略）

样式编辑器可用于批量调整字幕样式，两种方式打开
- 直接点右边的样式旁的【编辑】

- 顶部【字幕】→【样式管理器】→【当前脚本】→选中要编辑的样式→【编辑】
基础的样式都可以在这里调整，比如字体、字号、边框、阴影、颜色、缩放、间距等


## 5.常用代码
\n 软性分行 (回车)，只在分行模式 (WrapStyle) 为 2 时有效，其它分行模式下相当于一个空格
\N 硬性分行 (回车)，任何分行模式下都有效
\h 硬性空格，保证显示字幕时不会在它的这个空格上分行 (保证左右两个词在同一行)
以上三个以外的ASS代码均在{}内，以\开始
颜色由{&H+十六进制编码&}表示，对位置在它后面的字生效，一些常用的比如：
- 主要颜色{\c+&HXXXXXX&}或者{\1c+&HXXXXXX&}
- 边框宽度 {\bord+数字}
- 边框颜色{\3c+&HXXXXXX&}
- 阴影宽度{\shad+数字}
- 阴影颜色 {\4c+&HXXXXXX&}
PS：{\2c+&HXXXXXX&}为次要颜色
- 1 2 3 4对应主要 次要 边框 阴影，对不透明度也是一样 {\1a} {\2a} {\3a} {\4a}
- \alpha一次设置以上4个部分的透明度
- alpha 值为00意味着完全不透明，为FF（十进制的255）即为完全透明
- eg：\alpha&H80& 设置所有元素的透明度为十六进制的80，即十进制的128，各元素的透明度都是50%

以下四个由0或1控制，1表示开，0表示关
- 粗体 {\b1 或 \b0}
- 斜体 {\i1 或 \i0}
- 下划线 {\u1 或 \u0}
- 删除线 {\s1 或 \s0}

常见文字变化
- 字体 {\fn+字体名称}
- 字号 {\fs+数字}
  - 横向缩放{\fscx+百分数}，纵向缩放 {\fscy+百分数}
- 字间距 {\fsp+数字} 默认为0，数字越大间距越大
- 行间距{\fsvp+数字}
  - 需要vsmodfilter才能实现，见Part6→静态→贴图 ASS特效
  - 正数减小行间距，负数增大 
- 旋转 {\fr+度数} 或 {\frz+度数} 即沿Z轴旋转，度数可以是负值，也可以超过360
  - 沿X轴旋转{\frx+度数}， 沿Y轴旋转{\fry+度数}
边框模糊
- {\be+数字} 按一般模糊的倍数来模糊文字边缘，必须为整数
- {\blur+数字} 高斯模糊，可以为非整数，模糊效果更好一些

对齐方式
- {\an+1-9}与图对应
结合边距使用，可以在样式编辑器中批量调整位置

时间
- 帧模式下，一帧对应30ms左右（不同帧率下有一定变化），以下提到的时间均以ms为单位
位置
- {\pos(x,y)} x为横坐标，y为纵坐标
直接选中要修改位置的行，在视频想要的位置上双击即可，修改坐标可用于精细调整
- {\move(x1,y1,x2,y2,\*time1,\*time2)}在时间time1到time2内，从位置(x1,y1)匀速移动到位置(x2,y2)；其中\time1和\time2可以忽略，则该行在整个时间段内匀速移动
  - 一行中{\pos}和{\move}只能出现一个
 PS：这里的time1从该行起始时间算起，如time1=0，time2=180，即该行在0-180ms内移动，对应约为前6帧内移动
淡入淡出
- {\fad+(time1,time2)}或{\fade+(time1,time2)}，time1为淡入时间，time2为淡出时间。如{\fad(300,300)}即淡入300ms，淡出300ms，约为淡入淡出均10帧
重置样式
- {\r} 重置其后字符的样式，会让一切样式标签失效，包括动画效果，恢复到原本的样式
动态变化
- {\t(*time1,*time2,*speed,code)}
time1为开始时间，time2为结束时间，可以省略，这时动态效果在整行的时间内运行
speed为加速度，0~1减速, 大于1加速，可以省略，则此时匀速变化
code可以是上述的各种特效代码，比如\fs字号变换，\fr旋转，\clip矩形蒙版变化等
{\t}外为初始状态，{\t}内为变化后状态
蒙版
- 矩形蒙版{\clip(x1,y1,x2,y2)} 
其中(x1,y1)为矩形框左上角的坐标，(x2,y2)为矩形框右下角的坐标。更便捷的方法是，点击画面左边工具栏的【裁剪字幕为一个矩形】，然后直接在画面上画框
对字幕设置蒙版即只显示蒙版内的部分，可以结合{\t}和{\move}做动态特效，也可以做多色叠字
 
- 不规则图形蒙版
依然是画面左边工具栏，先用上述矩形工具画一个矩形，然后点击【裁剪字幕为一个矢量区域】，矩形的四个点随便拖成想要的形状

- 反蒙版{\iclip}(只显示蒙版外的部分)
矩形的依然由(x1,y1)和(x2,y2)确定位置，变为{\iclip(x1,y1,x2,y2)}
不规则图形做法与上述一致，在clip前加上i即可
- 返回标准模式
做完后点击一下画面左边工具栏的【标准模式】，就可以退出画蒙版，回到标准模式


> 参考
- https://aegi.vmoe.info/docs/3.2/Main_Page/
- https://blog.kysdm.com/2020/10/31/Aegisub%20-%20%E5%A4%A7%E7%A5%9E%E4%B9%8B%E8%B7%AF/

## 6.More About 特效
VSFilterMod滤镜相关，贴图&渐变色，竖向，蒙版+运动，旋转，缩放
见 ASS特效 

## 7.自动化工具
lua文件导入和使用
暂时无法在文档外展示此内容
下载后把lua文件放到到"Aegisub安装目录\automation\autoload"文件夹内
再打开Aegisub，顶部【自动化】，即可使用


批量添加特效
- 顶部【字幕】→【选择多行】，选择要添加的行，比如这里选择所有【默认】样式的行
- 顶部【编辑】→【搜索替换】

- 查找目标 ^ ，表示在这一行开头添加，勾选【使用正则表达式】，否则不识别
- 替换为要添加的特效，比如这里替换为边框模糊{\\blur2}
- 这里必须为两条斜杠\\，一条也不识别，因为\是转义字符
- 限制【所选行】，如果对所有行都添加再选择【所有行】



